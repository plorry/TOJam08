/* DOM Keyboard Event Level 3 polyfill | @version 0.4.3 | MIT License | github.com/termi */
void function(){
var f=void 0,h=!0,j=null,k=!1,l;try{l="a"==(new this.KeyboardEvent("keyup",{key:"a"})).key}catch(aa){l=k}
if(!l){var x=function(a,b){var c;try{c=document.createEvent("KeyboardEvent")}catch(d){c=document.createEvent("Event")}b=b||{};var e={},n,g;for(n in m)p(m,n)&&(e[n]=n in b&&(g=b[n])!==f?g:m[n]);g=e.ctrlKey||k;var q=e.shiftKey||k,r=e.altKey||k,K=e.metaKey||k,S=e.altGraphKey||k,T=3<s?((g?"Control":"")+(q?" Shift":"")+(r?" Alt":"")+(K?" Meta":"")+(S?" AltGraph":"")).trim():j,E=(e.key||"")+"",O=(e["char"]||"")+"",L=e.location,u=E&&E.charCodeAt(0)||0,B=e.bubbles,C=e.cancelable,U=e.repeat,V=e.locale,W=k,
u=e.keyCode=e.keyCode||u;e.which=e.which||u;t||(c.__keyCode=u,c.__charCode=u,c.__which=u);if("initKeyEvent"in c)c.initKeyEvent(a,B,C,v,g,r,q,K,u,u),W=h;else if("initKeyboardEvent"in c&&ba)try{1==s?(c.initKeyboardEvent(a,B,C,v,E,L,g,q,r,K,S),c.__char=O):2==s?c.initKeyboardEvent(a,B,C,v,g,r,q,K,u,u):3==s?(c.initKeyboardEvent(a,B,C,v,E,L,g,r,q,K,S),c.__char=O):4==s?(c.initKeyboardEvent(a,B,C,v,E,L,T,U,V),c.__char=O):5==s?c.initKeyboardEvent(a,B,C,v,O,E,L,T,U,V):c.initKeyboardEvent(a,B,C,v,E,L,T,U,V),
W=h}catch(ua){ba=k}W||c.initEvent(a,B,C,v);for(n in m)p(m,n)&&c[n]!=e[n]&&(delete c[n],w(c,n,{writable:h,value:e[n]}));"isTrusted"in c||(c.i=k);return c},y=function(a){return a&&!(a in ca)&&"U+"!==a.substring(0,2)},ea=function(a){var b=a.which||a.keyCode,c=this.g,d;a.ctrlKey||!da&&a.altKey||a.__key||(d=z[b])&&0!==d.a||a.i===k?(b=this.f,"object"===typeof b&&"handleEvent"in b&&(c=b,b=b.handleEvent),b&&b.apply&&b.apply(c,arguments)):(c=c._||(c._={}),c._h_9e2__keyCode=b,"keyLocation"in a&&(c._keyLocation=
a.e))},ha=function(a){var b,c=a.which||a.keyCode,d=this._,e;if(!a.__stopNow){if(d&&"_h_9e2__keyCode"in d){b=d._h_9e2__keyCode;delete d._h_9e2__keyCode;a.__keyCode=b;if((e=A[b])&&D&&e.d)b=e.d;"keyLocation"in a&&"_keyLocation"in d&&(delete a.e,a.e=d._keyLocation);91>b&&(64<b&&c!=b&&!A[b])&&(e=e||(A[b]={}),e.d=b);d=e&&e.a||String.fromCharCode(b).toLowerCase();a.__key=d;a.__char=String.fromCharCode(c);d=new v.KeyboardEvent("keydown",a);delete d.keyLocation;delete d.__location;fa?(delete d.which,w(d,"which",
{value:b})):d.__which=b;t&&(delete d.keyCode,w(d,"keyCode",{value:b}));d.__location=F.call(d);G||(e=e||(e=A[c]=A[b]={}),e.b=d["char"]);b=!(a.target||this).dispatchEvent(d)}else b=!a.ctrlKey&&(d=A[c])&&1<("object"==typeof d?d.a||"":d).length?2:0;b&&(b===h&&a.preventDefault(),ga?a.stopImmediatePropagation():(a.__stopNow=h,a.stopPropagation()))}},v=this,ia=1,ja=2,H=3,ka=4,la=5,ma=v.Event.prototype,I=v.KeyboardEvent&&v.KeyboardEvent.prototype||ma,G,J,na,M,w=Object.defineProperty||function(a,b,c){"value"in
c?a[b]=c.value:("get"in c&&a.__defineGetter__(b,c.get),"set"in c&&a.__defineSetter__(b,c.set))},N=Object.getOwnPropertyDescriptor,P=function(a,b){return"__lookupGetter__"in a?a.__lookupGetter__(b):N?(N(a,b)||{}).get:f},oa={keydown:j,keyup:j,keypress:j},pa=1,m={"char":"",key:"",location:0,ctrlKey:k,shiftKey:k,altKey:k,metaKey:k,repeat:k,locale:"",detail:0,bubbles:k,cancelable:k},ga="stopImmediatePropagation"in document.createEvent("Event"),qa=Array.prototype.slice,ra=Function.prototype.bind||function(a,
b){var c=this,d=qa.call(arguments,1);return function(){return c.apply(a,d.concat(qa.call(arguments)))}},p=ra.call(Function.prototype.call,Object.prototype.hasOwnProperty),ba=h,F,s;var Q=document.createEvent("KeyboardEvent");try{Q.initKeyboardEvent("keyup",k,k,v,"+",3,h,k,h,k,k),s="+"==(Q.keyIdentifier||Q.key)&&3==(Q.keyLocation||Q.location)&&(Q.ctrlKey?Q.altKey?1:3:Q.shiftKey?2:4)||"+"==Q["char"]&&5||9}catch(sa){s=0}var t,fa,R=function(){try{return this&&new this("keyup",{key:"a","char":"b"})||{}}catch(a){return{}}}.call(v.KeyboardEvent),
ta,X={enumerable:k,configurable:h,writable:h};N&&(G=P(I,"key")||P(R,"key"),J=P(I,"char")||P(R,"char"),na=P(I,"location")||P(R,"location"),M=P(I,"keyCode"));var z={3:"Cancel",6:"Help",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",21:"KanaMode",22:"HangulMode",23:"JunjaMode",24:"FinalMode",25:"HanjaMode",27:"Esc",28:"Convert",29:"Nonconvert",30:"Accept",31:"ModeChange",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",
39:"Right",40:"Down",41:"Select",43:"Execute",44:"PrintScreen",45:"Insert",46:"Del",47:"Help",91:{a:"OS",b:k,c:ia},92:{a:"OS",b:k,c:ja},93:"Menu",106:{a:"Multiply",b:"*",c:H},107:{a:"Add",b:"+",c:H},108:{a:"Separator",b:k,c:H},109:{a:"Subtract",b:"-",c:H},110:{a:"Decimal",b:".",c:H},111:{a:"Divide",b:"/",c:H},144:{a:"NumLock",b:k,c:H},145:"ScrollLock",180:"LaunchMail",181:"SelectMedia",182:"LaunchApplication1",183:"LaunchApplication2",224:"Meta",229:"Process",246:"Attn",247:"Crsel",248:"Exsel",249:"EraseEof",
251:"Zoom",254:"Clear"},A={186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",226:"\\"},va=v.navigator.userAgent.toLowerCase(),da=!!~(v.navigator.platform+"").indexOf("Mac"),Y={},Z,D,$;for(Z=105;95<Z;--Z)$=Z-96,A[$+48]=G?$+"":{a:$+""},A[Z]={a:$+"",c:H};if(!G)for(Z in A)p(A,Z)&&"object"!=typeof A[Z]&&(A[Z]={a:A[Z]});for(Z=135;111<Z;--Z)z[Z]="F"+(Z-111);if(v.opera)J||(D=h,z[57351]=z[93],A[187]=A[61]={a:0,d:187},A[189]=A[109]={a:0,d:189,c:3});else{Y.names=va.match(/(mozilla|compatible|chrome|webkit|safari)/gi);
for(Z=Y.names&&Y.names.length||0;0<Z--;)Y[Y.names[Z]]=h;Y.mozilla&&(!Y.compatible&&!Y.webkit)&&(D=h,Y.h=+(va.match(/firefox\/([0-9]+)/)||[])[1],$=A[61]=A[187],$.d=187,$=A[173]=A[189],$.d=189,$=A[59]=A[186],$.d=186,15>Y.h&&(z[107]=z[61],A[109]=A[173]))}var ca={Escape:j,Win:j,Scroll:j,Apps:j,Delete:j,Window:j,ContextMenu:j,Mul:j};x.DOM_KEY_LOCATION_STANDARD=0;x.DOM_KEY_LOCATION_LEFT=ia;x.DOM_KEY_LOCATION_RIGHT=ja;x.DOM_KEY_LOCATION_NUMPAD=H;x.DOM_KEY_LOCATION_MOBILE=ka;x.DOM_KEY_LOCATION_JOYSTICK=la;
x.prototype=I;$=new x("keyup");try{delete $.keyCode,w($,"keyCode",{writable:h,value:9}),delete $.which,w($,"which",{writable:h,value:9})}catch(wa){}fa=9===$.which;!(t=9==$.keyCode)&&M?(w(I,"keyCode",{enumerable:h,configurable:h,get:function(){return"__keyCode"in this?this.__keyCode:M.call(this)},set:function(a){return this.__keyCode=isNaN(a)?0:a}}),w(I,"charCode",{enumerable:h,configurable:h,get:function(){return"__charCode"in this?this.__charCode:M.call(this)},set:function(a){return this.__charCode=
isNaN(a)?0:a}})):M=f;ta=function(a){a=a||"";if(1<a.length)return a;var b=this.which||this.keyCode;"keypress"==this.type&&(b+=999);var c=A[b],d=c&&"object"==typeof c?c.a:c;if(d)return d;b=c&&c.d||64<b&&91>b&&b;return(b&&String.fromCharCode(b)||a).toLowerCase()};w(I,"key",{enumerable:h,configurable:h,get:function(){var a;if(G&&((a=G.call(this))&&2>a.length||y(a)))return ta.call(this,a);if("__key"in this)return this.__key;if(this.type in oa){var b=this.which||this.keyCode,c="keypress"!=this.type;a=c?
"keyIdentifier"in this&&y(this.keyIdentifier)?this.keyIdentifier:!c||(a=z[b])?((a=a||A[b])&&"object"==typeof a?a.a:a)||this["char"]:ta.call(this,a):this["char"];X.value=a;w(this,"__key",X);return a}}});w(I,"char",{enumerable:h,configurable:h,get:function(){if(this.type in oa){if(this.ctrlKey===h)return"";if("__char"in this)return this.__char;var a,b="keypress"!=this.type,c=!b&&this.__keyCode||this.which||this.keyCode,d;if(b&&(a=z[c])&&"object"!=typeof a)return"";if(!(J&&(a=J.call(this))!==j))d=(a=
A[c]||z[c])&&"object"==typeof a,!d||a.b===k?a="":d&&a.b!==f?a=a.b||"":"keyIdentifier"in this&&y(this.keyIdentifier)?a="":(a=String.fromCharCode(c),b&&!this.shiftKey&&(a=a.toLowerCase()));X.value=a;w(this,"__char",X);return a}}});F=function(){if(na)return na.call(this);if("__location"in this)return this.__location;if(this.type in oa){var a=this.which||this.keyCode,b="keypress"!=this.type;"keyLocation"in this?a=this.keyLocation:(a=b&&(z[a]||A[a]),a="object"==typeof a&&a.c||0);X.value=a;w(this,"__location",
X);return a}};w(I,"location",{enumerable:h,configurable:h,get:F});J?document.addEventListener("keydown",function(a){var b=J?J.call(a):a["char"],b=b&&b.charCodeAt(0),c,d;if(b&&!A[b+=999])c=A[b]={},a=a.keyCode,b=(d=A[a])?"object"==typeof d&&d.a||d:String.fromCharCode(a),64<a&&(91>a&&a)&&(b=b.toLowerCase()),c.a=b},h):[($=v.Document)&&$.prototype||v.document,($=v.HTMLDocument)&&$.prototype,($=v.Window)&&$.prototype||v,($=v.Node)&&$.prototype,($=v.Element)&&$.prototype].forEach(function(a){if(a&&p(a,"addEventListener")){var b=
a.addEventListener,c=a.removeEventListener;b&&(a.addEventListener=function(a,c,n){var g,q,r;if("keydown"===(a+"").toLowerCase()){g="_e_8vj"+(n?"-":"")+a;q=g+(c._h_9e2||(c._h_9e2=++pa));r=g+"__count";if(!(g=this._))g=this._={};if(q in g)return;g[r]===f&&b.call(this,"keypress",ha,h);g[r]=(g[r]||0)+1;arguments[1]=g[q]=ra.call(ea,{f:c,g:this})}return b.apply(this,arguments)},c&&(a.removeEventListener=function(a,b,n){var g,q,r;"keydown"===(a+"").toLowerCase()&&(g="_e_8vj"+(n?"-":"")+a,q=g+b._h_9e2,r=g+
"__count",g=this._,q&&(g&&g[r])&&(--g[r],(arguments[1]=g[q])&&delete g[q]));return c.apply(this,arguments)}))}});v.KeyboardEvent=x;ia=ja=H=ka=la=N=P=$=R=x=I=Z=ma=j};
}.call(this);
